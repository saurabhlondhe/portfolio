(this.webpackJsonpportfolio=this.webpackJsonpportfolio||[]).push([[19],{165:function(e,n,t){"use strict";t.r(n),t.d(n,"readingTime",(function(){return s})),t.d(n,"default",(function(){return o})),t.d(n,"tableOfContents",(function(){return p})),t.d(n,"frontMatter",(function(){return r}));t(0);var a=t(120);const s={text:"2 min read",minutes:1.71,time:102600,words:342},l={};function o({components:e,...n}){return Object(a.b)("wrapper",Object.assign({},l,n,{components:e,mdxType:"MDXLayout"}),Object(a.b)("p",null,"OpenFaaS provides function as a service. FaaS is a framework for building serverless functions on top of containers. FaaS can be run using Docker Swarm.\nWith FaaS developers can focus on development more than servers and deploys. FaaS providers do not charge to their clients for an ideal condition, clients only pay for the computation taken by the function."),Object(a.b)("p",null,"If you haven\u2019t installed OpenFaaS, then ",Object(a.b)("a",{parentName:"p",href:"https://github.com/openfaas/workshop/blob/master/lab1.md"},"Install OpenFaaS")," from here."),Object(a.b)("h2",{id:"lets-start-with-simple-python-app"},"Lets start with Simple Python app"),Object(a.b)("p",null,"create a folder for our files:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-sh","data-language":"sh","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:"$ mkdir myapp &amp;&amp; cd myapp\n"}})),Object(a.b)("p",null,"Get templates from GitHub before proceeding"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-sh","data-language":"sh","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:"$ faas-cli template pull\n"}})),Object(a.b)("p",null,"we are using ",Object(a.b)("inlineCode",{parentName:"p"},"python3")," for development you can use ",Object(a.b)("inlineCode",{parentName:"p"},"python2")," also. a user following syntax to start with the app."),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-sh","data-language":"sh","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:"$ faas-cli new --lang &lt;language&gt; &lt;app-name&gt; --prefix=&quot;&lt;your-docker-username&gt;&quot;\n"}})),Object(a.b)("p",null,"we will use python3 so our command will be:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-sh","data-language":"sh","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:"$ faas-cli new --lang python3 elements-sum --prefix=&quot;&lt;your-docker-username&gt;&quot;\n"}})),Object(a.b)("p",null,"now you will be having a following directory structure"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},"      ./elements-sum.yml\n      ./elements-sum\n      ./elements-sum/handler.py\n      ./elements-sum/requirements.txt\n")),Object(a.b)("p",null,"modify ",Object(a.b)("inlineCode",{parentName:"p"},"./elements-sum/requirements.txt")," if any dependancy module required\nwrite python code in ",Object(a.b)("inlineCode",{parentName:"p"},"./elements-sum/handler.py")),Object(a.b)("p",null,"by default file will look like:"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},'```python\ndef handle(req):\n    """handle a request to the function\n    Args:\n        req (str): request body\n    """\n    return req\n```\n')),Object(a.b)("p",null,"this function only returns args passed"),Object(a.b)("p",null,"add code to get the sum of elements"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-python","data-language":"python","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:'<span class="token keyword">def</span> <span class="token function">handle</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">:</span>\n    <span class="token builtin">sum</span><span class="token operator">=</span><span class="token number">0</span>\n    req<span class="token operator">=</span>req<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">","</span><span class="token punctuation">)</span>\n    <span class="token keyword">for</span> i <span class="token keyword">in</span> req<span class="token punctuation">:</span>\n        <span class="token builtin">sum</span><span class="token operator">+=</span><span class="token builtin">int</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>\n    <span class="token keyword">return</span> <span class="token builtin">str</span><span class="token punctuation">(</span><span class="token builtin">sum</span><span class="token punctuation">)</span>\n'}})),Object(a.b)("p",null,"if any dependancy needed add it into ",Object(a.b)("inlineCode",{parentName:"p"},"./elements-sum/requirements.txt")),Object(a.b)("p",null,"build, push to docker hub and deploy function containers"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-sh","data-language":"sh","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:"$ faas-cli up -f elements-sum.yml\n"}})),Object(a.b)("p",null,"if you got an error then login to docker from CLI using ",Object(a.b)("inlineCode",{parentName:"p"},"$docker login"),"\nthe app will be deployed to OpenFaaS ",Object(a.b)("a",{parentName:"p",href:"http://127.0.0.1:8080/ui"},"http://127.0.0.1:8080/ui/"),"\nprovide input as"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre"},"`10,20,30,40,50`\n\nwill provide output as `150`\n")),Object(a.b)("img",{src:"https://saurabhlondhe.github.io/static/assets/img/blog/openfaas/openfaas_demo1.png"}),Object(a.b)("p",null,"or"),Object(a.b)("pre",null,Object(a.b)("code",{parentName:"pre",className:"language-sh","data-language":"sh","data-highlighted-line-numbers":"",dangerouslySetInnerHTML:{__html:"$ echo 10,20,30,40,50 | faas-cli invoke elements-sum\n"}})),Object(a.b)("p",null,"You can add other functions in ",Object(a.b)("inlineCode",{parentName:"p"},"./elements-sum/handler.py")),Object(a.b)("p",null,"As well as python we can deploy many apps written in different languages"))}o.isMDXComponent=!0;const p=(e={})=>[{id:"lets-start-with-simple-python-app",level:2,title:"Lets start with Simple Python app",children:[]}],r={title:"Deploy a python app using OpenFaaS",author:"Saurabh Londhe",slug:"python-openfass",bannerPlaceholder:"3-components-of-meaningful-motion-design-placeholder.jpg",banner:"openfass.png",date:"2018-10-10T00:00:00.000Z",categories:["Cloud","Docker","Linux","Project"],layout:"post"}}}]);
//# sourceMappingURL=19.3ea6f671.chunk.js.map