{"version":3,"sources":["posts/2018-10-10-python-app-with-openfaas.mdx"],"names":["readingTime","layoutProps","MDXContent","components","props","mdxType","parentName","src","isMDXComponent","tableOfContents","id","level","title","children","frontMatter"],"mappings":"yGACA,yMAEO,MAAMA,EAAc,CAAC,KAAO,aAAa,QAAU,KAAK,KAAO,OAAO,MAAQ,KAM/EC,EAAc,GAIL,SAASC,GAAW,WACjCC,KACGC,IAEH,OAAO,YALS,UAKC,iBAAKH,EAAiBG,EAAK,CAAED,WAAYA,EAAYE,QAAQ,cAC5E,qBAAK,4WAEL,qBAAK,gDAA0C,iBAAGC,WAAW,IACzD,KAAQ,4DACL,oBAAwB,eAC/B,kBACE,GAAM,qCACH,qCACL,qBAAK,kCACL,uBAAK,oBAAMA,WAAW,MAClB,UAAa,cACb,gBAAiB,KACjB,gCAAiC,GACjC,wBAA2B,CACzB,OAAU,0CAGhB,qBAAK,+CACL,uBAAK,oBAAMA,WAAW,MAClB,UAAa,cACb,gBAAiB,KACjB,gCAAiC,GACjC,wBAA2B,CACzB,OAAU,iCAGhB,qBAAK,gBAAe,0BAAYA,WAAW,KAAM,WAAwB,gCAA+B,0BAAYA,WAAW,KAAM,WAAwB,yDAC7J,uBAAK,oBAAMA,WAAW,MAClB,UAAa,cACb,gBAAiB,KACjB,gCAAiC,GACjC,wBAA2B,CACzB,OAAU,kHAGhB,qBAAK,+CACL,uBAAK,oBAAMA,WAAW,MAClB,UAAa,cACb,gBAAiB,KACjB,gCAAiC,GACjC,wBAA2B,CACzB,OAAU,qGAGhB,qBAAK,0DACL,uBAAK,oBAAMA,WAAW,OAAgB,6HAKtC,qBAAK,UAAS,0BAAYA,WAAW,KAAM,mCAAgD,4DACxE,0BAAYA,WAAW,KAAM,8BAChD,qBAAK,mCACL,uBAAK,oBAAMA,WAAW,OAAgB,qJAStC,qBAAK,0CACL,qBAAK,uCACL,uBAAK,oBAAMA,WAAW,MAClB,UAAa,kBACb,gBAAiB,SACjB,gCAAiC,GACjC,wBAA2B,CACzB,OAAU,qjCAGhB,qBAAK,wCAAuC,0BAAYA,WAAW,KAAM,oCACzE,qBAAK,4DACL,uBAAK,oBAAMA,WAAW,MAClB,UAAa,cACb,gBAAiB,KACjB,gCAAiC,GACjC,wBAA2B,CACzB,OAAU,0CAGhB,qBAAK,2DAA0D,0BAAYA,WAAW,KAAM,iBAA8B,0CACvF,iBAAGA,WAAW,IAC7C,KAAQ,4BACL,6BAAiC,sBAExC,uBAAK,oBAAMA,WAAW,OAAgB,uDAItC,mBAAKC,IAAI,uFACT,qBAAK,MACL,uBAAK,oBAAMD,WAAW,MAClB,UAAa,cACb,gBAAiB,KACjB,gCAAiC,GACjC,wBAA2B,CACzB,OAAU,6DAGhB,qBAAK,kCAAiC,0BAAYA,WAAW,KAAM,8BACnE,qBAAK,6EAITJ,EAAWM,gBAAiB,EACrB,MAAMC,EAAkB,CAACN,EAAW,KAAO,CAChD,CACEO,GAAI,oCACJC,MAAO,EACPC,MAAO,oCACPC,SAAU,KAMDC,EAAc,CACzB,MAAS,qCACT,OAAU,iBACV,KAAQ,kBACR,kBAAqB,2DACrB,OAAU,eACV,KAAQ,2BACR,WAAc,CACZ,QACA,SACA,QACA,WAEF,OAAU","file":"static/js/19.6c17e61a.chunk.js","sourcesContent":["\nimport React from 'react'\nimport { mdx } from '@mdx-js/react'\nexport const readingTime = {\"text\":\"2 min read\",\"minutes\":1.71,\"time\":102600,\"words\":342}\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\n\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <p>{`OpenFaaS provides function as a service. FaaS is a framework for building serverless functions on top of containers. FaaS can be run using Docker Swarm.\nWith FaaS developers can focus on development more than servers and deploys. FaaS providers do not charge to their clients for an ideal condition, clients only pay for the computation taken by the function.`}</p>\n    <p>{`If you havenâ€™t installed OpenFaaS, then `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/openfaas/workshop/blob/master/lab1.md\"\n      }}>{`Install OpenFaaS`}</a>{` from here.`}</p>\n    <h2 {...{\n      \"id\": \"lets-start-with-simple-python-app\"\n    }}>{`Lets start with Simple Python app`}</h2>\n    <p>{`create a folder for our files:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-sh\",\n        \"data-language\": \"sh\",\n        \"data-highlighted-line-numbers\": \"\",\n        \"dangerouslySetInnerHTML\": {\n          \"__html\": \"$ mkdir myapp &amp;&amp; cd myapp\\n\"\n        }\n      }}></code></pre>\n    <p>{`Get templates from GitHub before proceeding`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-sh\",\n        \"data-language\": \"sh\",\n        \"data-highlighted-line-numbers\": \"\",\n        \"dangerouslySetInnerHTML\": {\n          \"__html\": \"$ faas-cli template pull\\n\"\n        }\n      }}></code></pre>\n    <p>{`we are using `}<inlineCode parentName=\"p\">{`python3`}</inlineCode>{` for development you can use `}<inlineCode parentName=\"p\">{`python2`}</inlineCode>{` also. a user following syntax to start with the app.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-sh\",\n        \"data-language\": \"sh\",\n        \"data-highlighted-line-numbers\": \"\",\n        \"dangerouslySetInnerHTML\": {\n          \"__html\": \"$ faas-cli new --lang &lt;language&gt; &lt;app-name&gt; --prefix=&quot;&lt;your-docker-username&gt;&quot;\\n\"\n        }\n      }}></code></pre>\n    <p>{`we will use python3 so our command will be:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-sh\",\n        \"data-language\": \"sh\",\n        \"data-highlighted-line-numbers\": \"\",\n        \"dangerouslySetInnerHTML\": {\n          \"__html\": \"$ faas-cli new --lang python3 elements-sum --prefix=&quot;&lt;your-docker-username&gt;&quot;\\n\"\n        }\n      }}></code></pre>\n    <p>{`now you will be having a following directory structure`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`      ./elements-sum.yml\n      ./elements-sum\n      ./elements-sum/handler.py\n      ./elements-sum/requirements.txt\n`}</code></pre>\n    <p>{`modify `}<inlineCode parentName=\"p\">{`./elements-sum/requirements.txt`}</inlineCode>{` if any dependancy module required\nwrite python code in `}<inlineCode parentName=\"p\">{`./elements-sum/handler.py`}</inlineCode></p>\n    <p>{`by default file will look like:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`\\`\\`\\`python\ndef handle(req):\n    \"\"\"handle a request to the function\n    Args:\n        req (str): request body\n    \"\"\"\n    return req\n\\`\\`\\`\n`}</code></pre>\n    <p>{`this function only returns args passed`}</p>\n    <p>{`add code to get the sum of elements`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-python\",\n        \"data-language\": \"python\",\n        \"data-highlighted-line-numbers\": \"\",\n        \"dangerouslySetInnerHTML\": {\n          \"__html\": \"<span class=\\\"token keyword\\\">def</span> <span class=\\\"token function\\\">handle</span><span class=\\\"token punctuation\\\">(</span>req<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">:</span>\\n    <span class=\\\"token builtin\\\">sum</span><span class=\\\"token operator\\\">=</span><span class=\\\"token number\\\">0</span>\\n    req<span class=\\\"token operator\\\">=</span>req<span class=\\\"token punctuation\\\">.</span>split<span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">\\\",\\\"</span><span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token keyword\\\">for</span> i <span class=\\\"token keyword\\\">in</span> req<span class=\\\"token punctuation\\\">:</span>\\n        <span class=\\\"token builtin\\\">sum</span><span class=\\\"token operator\\\">+=</span><span class=\\\"token builtin\\\">int</span><span class=\\\"token punctuation\\\">(</span>i<span class=\\\"token punctuation\\\">)</span>\\n    <span class=\\\"token keyword\\\">return</span> <span class=\\\"token builtin\\\">str</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token builtin\\\">sum</span><span class=\\\"token punctuation\\\">)</span>\\n\"\n        }\n      }}></code></pre>\n    <p>{`if any dependancy needed add it into `}<inlineCode parentName=\"p\">{`./elements-sum/requirements.txt`}</inlineCode></p>\n    <p>{`build, push to docker hub and deploy function containers`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-sh\",\n        \"data-language\": \"sh\",\n        \"data-highlighted-line-numbers\": \"\",\n        \"dangerouslySetInnerHTML\": {\n          \"__html\": \"$ faas-cli up -f elements-sum.yml\\n\"\n        }\n      }}></code></pre>\n    <p>{`if you got an error then login to docker from CLI using `}<inlineCode parentName=\"p\">{`$docker login`}</inlineCode>{`\nthe app will be deployed to OpenFaaS `}<a parentName=\"p\" {...{\n        \"href\": \"http://127.0.0.1:8080/ui\"\n      }}>{`http://127.0.0.1:8080/ui/`}</a>{`\nprovide input as`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`\\`10,20,30,40,50\\`\n\nwill provide output as \\`150\\`\n`}</code></pre>\n    <img src=\"https://saurabhlondhe.github.io/static/assets/img/blog/openfaas/openfaas_demo1.png\" />\n    <p>{`or`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-sh\",\n        \"data-language\": \"sh\",\n        \"data-highlighted-line-numbers\": \"\",\n        \"dangerouslySetInnerHTML\": {\n          \"__html\": \"$ echo 10,20,30,40,50 | faas-cli invoke elements-sum\\n\"\n        }\n      }}></code></pre>\n    <p>{`You can add other functions in `}<inlineCode parentName=\"p\">{`./elements-sum/handler.py`}</inlineCode></p>\n    <p>{`As well as python we can deploy many apps written in different languages`}</p>\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\nexport const tableOfContents = (components={}) => [\n  {\n    id: \"lets-start-with-simple-python-app\",\n    level: 2,\n    title: \"Lets start with Simple Python app\",\n    children: [\n        \n      ]\n  }\n]\n\nexport const frontMatter = {\n  \"title\": \"Deploy a python app using OpenFaaS\",\n  \"author\": \"Saurabh Londhe\",\n  \"slug\": \"python-openfass\",\n  \"bannerPlaceholder\": \"3-components-of-meaningful-motion-design-placeholder.jpg\",\n  \"banner\": \"openfass.png\",\n  \"date\": \"2018-10-10T00:00:00.000Z\",\n  \"categories\": [\n    \"Cloud\",\n    \"Docker\",\n    \"Linux\",\n    \"Project\"\n  ],\n  \"layout\": \"post\"\n}\n\n"],"sourceRoot":""}